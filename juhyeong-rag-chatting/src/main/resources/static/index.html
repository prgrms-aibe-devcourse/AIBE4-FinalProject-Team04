<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>파일 관리 시스템</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div id="app">
        <nav class="nav">
            <h1 class="nav-title">파일 관리 시스템</h1>
            <div class="nav-links">
                <a href="#/" class="nav-link" data-page="list">파일 목록</a>
                <a href="#/upload" class="nav-link" data-page="upload">파일 업로드</a>
                <a href="#/chat" class="nav-link" data-page="chat">RAG 채팅</a>
            </div>
        </nav>

        <main class="container">
            <!-- 파일 목록 페이지 -->
            <section id="page-list" class="page">
                <div class="page-header">
                    <h2>전체 파일 목록</h2>
                    <button id="btn-refresh" class="btn btn-secondary">새로고침</button>
                </div>
                <div id="file-list-area">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>파일명</th>
                                <th>확장자</th>
                                <th>버전</th>
                                <th>카테고리</th>
                                <th>업로드 날짜</th>
                                <th>다운로드</th>
                                <th>삭제</th>
                            </tr>
                        </thead>
                        <tbody id="file-table-body">
                        </tbody>
                    </table>
                    <p id="empty-msg" class="empty-msg hidden">등록된 파일이 없습니다.</p>
                    <div id="pagination" class="pagination hidden">
                        <button id="btn-prev" class="btn btn-secondary btn-sm" disabled>이전</button>
                        <span id="page-info" class="page-info"></span>
                        <button id="btn-next" class="btn btn-secondary btn-sm" disabled>다음</button>
                    </div>
                </div>
            </section>

            <!-- 파일 업로드 페이지 -->
            <section id="page-upload" class="page hidden">
                <h2>파일 업로드</h2>
                <form id="upload-form" class="upload-form">
                    <div class="form-group">
                        <label for="fileCategory">카테고리</label>
                        <select id="fileCategory" required>
                            <option value="">선택하세요</option>
                            <option value="매뉴얼">매뉴얼</option>
                            <option value="가이드">가이드</option>
                            <option value="보고서">보고서</option>
                            <option value="기타">기타</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="file">파일 선택</label>
                        <div class="file-drop-zone" id="drop-zone">
                            <input type="file" id="file" required>
                            <p class="drop-text">파일을 드래그하거나 클릭하여 선택하세요</p>
                            <p id="selected-file-name" class="selected-file hidden"></p>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">업로드</button>
                </form>
            </section>

            <!-- RAG 채팅 페이지 -->
            <section id="page-chat" class="page hidden">
                <div class="page-header">
                    <h2>RAG 채팅</h2>
                    <button id="btn-new-chat" class="btn btn-secondary">새 대화</button>
                </div>
                <div class="chat-container">
                    <!-- 필터 바 -->
                    <div class="chat-filter-bar">
                        <div class="filter-group">
                            <label for="searchScope">검색 범위</label>
                            <select id="searchScope">
                                <option value="ALL">전체 문서</option>
                                <option value="CATEGORY">카테고리별</option>
                                <option value="FILE">특정 파일</option>
                            </select>
                        </div>
                        <div class="filter-group" id="filter-version-scope">
                            <label for="versionScope">버전 범위</label>
                            <select id="versionScope">
                                <option value="LATEST">최신 버전만</option>
                                <option value="ALL_VERSIONS">모든 버전</option>
                            </select>
                        </div>
                        <div class="filter-group hidden" id="filter-category">
                            <label for="filterCategory">카테고리 선택</label>
                            <select id="filterCategory">
                                <option value="">카테고리를 선택하세요</option>
                            </select>
                        </div>
                        <div class="filter-group hidden" id="filter-file">
                            <label for="filterFile">파일 선택</label>
                            <select id="filterFile">
                                <option value="">파일을 선택하세요</option>
                            </select>
                        </div>
                        <div class="filter-group hidden" id="filter-versions">
                            <label>버전 선택</label>
                            <div id="versionCheckboxes" class="version-checkboxes"></div>
                        </div>
                    </div>

                    <!-- 시스템 메시지 -->
                    <details class="system-message-section">
                        <summary class="system-message-toggle">시스템 메시지 설정</summary>
                        <textarea id="userSystemMessage" class="system-message-input"
                                  placeholder="예: 표 형식으로 정리해줘, 영어로 답변해줘, 간결하게 요약해줘..."
                                  rows="2"></textarea>
                    </details>

                    <!-- 메시지 영역 -->
                    <div class="chat-messages" id="chatMessages">
                        <div class="chat-welcome">문서에 대해 질문해보세요.</div>
                    </div>

                    <!-- 입력 바 -->
                    <div class="chat-input-bar">
                        <input type="text" id="chatInput" placeholder="질문을 입력하세요..." autocomplete="off">
                        <button id="chatSendBtn" class="btn btn-primary">전송</button>
                    </div>
                </div>
            </section>

        </main>

        <!-- 토스트 알림 -->
        <div id="toast" class="toast hidden"></div>
    </div>

    <script src="/app.js"></script>
</body>
</html>
